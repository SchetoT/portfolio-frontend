---
import Layout from '../layouts/Layout.astro';

let projects = [];

const getProjects = async () => {
    const response = await fetch('http://localhost:3000/api/projects');
    if (response.ok) {
    projects = await response.json();
} else {
    console.error("Error al obtener proyectos");
}
};
await getProjects();
---

<Layout>
    <h1>Proyectos</h1>
    <p>Aquí puedes encontrar una lista de los proyectos en los que he trabajado.</p>

<ul>
    {projects.map((project) => (
    <li key={project._id}>
        <h2>{project.title}</h2>
        <p>{project.description}</p>
        <p><strong>Tecnologías:</strong> {project.technologies.join(", ")}</p>
        <a href={project.link} target="_blank">Ver Proyecto</a>
    </li>
    ))}
</ul>
</Layout>
