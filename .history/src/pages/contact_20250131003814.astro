---
import Layout from '../layouts/Layout.astro';
---

<Layout>
    <section class="w-full lg:w-[740px] mx-auto py-20">
        <h1 class="text-4xl font-bold text-center text-gray-900 dark:text-white">Contacto</h1>
        <p class="text-center text-lg text-gray-600 dark:text-gray-300 mt-4 mb-10">
            ¿Tienes alguna pregunta o quieres colaborar? ¡Envíame un mensaje y me pondré en contacto contigo!
        </p>

        <form id="contact-form" action="https://formspree.io/f/mkgobobq" method="POST" class="space-y-6">
            <div>
                <label for="name" class="block text-lg font-semibold text-gray-700 dark:text-gray-200 mb-2">Nombre</label>
                <input type="text" id="name" name="name" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white" required />
            </div>

            <div>
                <label for="email" class="block text-lg font-semibold text-gray-700 dark:text-gray-200 mb-2">Correo Electrónico</label>
                <input type="email" id="email" name="email" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white" required />
            </div>

            <div>
                <label for="message" class="block text-lg font-semibold text-gray-700 dark:text-gray-200 mb-2">Mensaje</label>
                <textarea id="message" name="message" rows="5" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white" required></textarea>
            </div>

            <div class="flex justify-center">
                <button type="submit" class="w-full py-3 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400">
                    Enviar Mensaje
                </button>
            </div>
        </form>

        <!-- Notificación de éxito -->
        <div id="notification" class="hidden fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-green-500 text-white py-2 px-6 rounded-lg shadow-lg">
            ¡Mensaje enviado con éxito!
        </div>
    </section>

    <script>
        document.getElementById('contact-form').addEventListener('submit', async function (e) {
            e.preventDefault();  // Evita la recarga de la página al enviar el formulario

            const formData = new FormData(this);

            try {
                const response = await fetch(this.action, {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    // Mostrar notificación de éxito
                    document.getElementById('notification').classList.remove('hidden');
                    
                    // Limpiar el formulario
                    this.reset();

                    // Ocultar la notificación después de 3 segundos
                    setTimeout(function() {
                        document.getElementById('notification').classList.add('hidden');
                    }, 3000);
                } else {
                    alert("Hubo un error al enviar el mensaje. Por favor, inténtalo nuevamente.");
                }
            } catch (error) {
                alert("Hubo un error al enviar el mensaje. Por favor, inténtalo nuevamente.");
            }
        });
    </script>
</Layout>
